<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>TenantPropagationBehavior(TTenantId) Class</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="TenantPropagationBehavior%3CTTenantId%3E class" /><meta name="System.Keywords" content="Autofac.Multitenant.Wcf.TenantPropagationBehavior%3CTTenantId%3E class" /><meta name="System.Keywords" content="TenantPropagationBehavior%3CTTenantId%3E class, about TenantPropagationBehavior%3CTTenantId%3E class" /><meta name="System.Keywords" content="TenantPropagationBehavior(Of TTenantId) class" /><meta name="System.Keywords" content="Autofac.Multitenant.Wcf.TenantPropagationBehavior(Of TTenantId) class" /><meta name="System.Keywords" content="TenantPropagationBehavior(Of TTenantId) class, about TenantPropagationBehavior(Of TTenantId) class" /><meta name="Microsoft.Help.F1" content="Autofac.Multitenant.Wcf.TenantPropagationBehavior`1" /><meta name="Microsoft.Help.Id" content="T:Autofac.Multitenant.Wcf.TenantPropagationBehavior`1" /><meta name="Description" content="Behavior for WCF clients and service hosts that is used to propagate tenant ID from client to service." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Autofac.Multitenant.Wcf" /><meta name="file" content="2BAC7967" /><meta name="guid" content="2BAC7967" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Autofac .NET Inversion of Control Container<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="62C594FF.htm" title="Autofac .NET Inversion of Control Container" tocid="roottoc">Autofac .NET Inversion of Control Container</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="62C594FF.htm" title="Autofac" tocid="62C594FF">Autofac</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="141CAB29.htm" title="Autofac.Multitenant.Wcf" tocid="141CAB29">Autofac.Multitenant.Wcf</a></div><div class="toclevel1 current" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="2BAC7967.htm" title="TenantPropagationBehavior(TTenantId) Class" tocid="2BAC7967">TenantPropagationBehavior(TTenantId) Class</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="DB9160FF.htm" title="TenantPropagationBehavior(TTenantId) Constructor " tocid="DB9160FF">TenantPropagationBehavior(TTenantId) Constructor </a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="A3D21E4F.htm" title="TenantPropagationBehavior(TTenantId) Properties" tocid="A3D21E4F">TenantPropagationBehavior(TTenantId) Properties</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="19C5AB85.htm" title="TenantPropagationBehavior(TTenantId) Methods" tocid="19C5AB85">TenantPropagationBehavior(TTenantId) Methods</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">TenantPropagationBehavior<span id="LST2BAC7967_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_0?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script><span class="typeparameter">TTenantId</span><span id="LST2BAC7967_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_1?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script> Class</td></tr></table><span class="introStyle"></span> <div class="summary">
             Behavior for WCF clients and service hosts that is used to propagate
             tenant ID from client to service.
             </div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Inheritance Hierarchy</span></div><div id="ID0RBSection" class="collapsibleSection"><a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">System<span id="LST2BAC7967_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Object</a><br />  <span class="selflink">Autofac.Multitenant.Wcf<span id="LST2BAC7967_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>TenantPropagationBehavior<span id="LST2BAC7967_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_4?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_5?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></span><br /></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="141CAB29.htm">Autofac.Multitenant.Wcf</a><br />
    <strong>Assembly:</strong>
   Autofac.Multitenant.Wcf (in Autofac.Multitenant.Wcf.dll) Version: 4.0.0-CI-234<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EDCA_tab1" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID1EDCA','cs','1','4');return false;">C#</a></div><div id="ID1EDCA_tab2" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID1EDCA','vb','2','4');return false;">VB</a></div><div id="ID1EDCA_tab3" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID1EDCA','cpp','3','4');return false;">C++</a></div><div id="ID1EDCA_tab4" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID1EDCA','fs','4','4');return false;">F#</a></div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EDCA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EDCA');return false;" title="Copy">Copy</a></div></div><div id="ID1EDCA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">class</span> <span class="identifier">TenantPropagationBehavior</span>&lt;TTenantId&gt; : <span class="identifier">IServiceBehavior</span>, 
	<span class="identifier">IEndpointBehavior</span>


<span class="keyword">public</span> <span class="keyword">class</span> <span class="identifier">TenantPropagationBehavior</span>&lt;TTenantId&gt; : <span class="identifier">IServiceBehavior</span>, 
	<span class="identifier">IEndpointBehavior</span>
</pre></div><div id="ID1EDCA_code_Div2" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">Public</span> <span class="keyword">Class</span> <span class="identifier">TenantPropagationBehavior</span>(<span class="keyword">Of</span> TTenantId)
	<span class="keyword">Implements</span> <span class="identifier">IServiceBehavior</span>, <span class="identifier">IEndpointBehavior</span>

<span class="keyword">Public</span> <span class="keyword">Class</span> <span class="identifier">TenantPropagationBehavior</span>(<span class="keyword">Of</span> TTenantId)
	<span class="keyword">Implements</span> <span class="identifier">IServiceBehavior</span>, <span class="identifier">IEndpointBehavior</span></pre></div><div id="ID1EDCA_code_Div3" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">generic</span>&lt;<span class="keyword">typename</span> TTenantId&gt;
<span class="keyword">public</span> <span class="keyword">ref class</span> <span class="identifier">TenantPropagationBehavior</span> : <span class="identifier">IServiceBehavior</span>, 
	<span class="identifier">IEndpointBehavior</span>

<span class="keyword">generic</span>&lt;<span class="keyword">typename</span> TTenantId&gt;
<span class="keyword">public</span> <span class="keyword">ref class</span> <span class="identifier">TenantPropagationBehavior</span> : <span class="identifier">IServiceBehavior</span>, 
	<span class="identifier">IEndpointBehavior</span></pre></div><div id="ID1EDCA_code_Div4" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">type</span> <span class="identifier">TenantPropagationBehavior</span>&lt;'TTenantId&gt; =  
    <span class="keyword">class</span>
        <span class="keyword">interface</span> <span class="identifier">IServiceBehavior</span>
        <span class="keyword">interface</span> <span class="identifier">IEndpointBehavior</span>
    <span class="keyword">end</span>

<span class="keyword">type</span> <span class="identifier">TenantPropagationBehavior</span>&lt;'TTenantId&gt; =  
    <span class="keyword">class</span>
        <span class="keyword">interface</span> <span class="identifier">IServiceBehavior</span>
        <span class="keyword">interface</span> <span class="identifier">IEndpointBehavior</span>
    <span class="keyword">end</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EDCA");</script><h4 class="subHeading">Type Parameters</h4><dl><dt><span class="parameter">TTenantId</span></dt><dd>
             The type of the tenant ID to propagate. Must be nullable and
             serializable so it can be added to a message header.
             </dd></dl></div><p>The <span class="selflink">TenantPropagationBehavior<span id="LST2BAC7967_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_6?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_7?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></span> type exposes the following members.</p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Constructors</span></div><div id="ID3RBSection" class="collapsibleSection"><table class="members" id="constructorList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="DB9160FF.htm">TenantPropagationBehavior<span id="LST2BAC7967_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_8?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_9"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_9?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a></td><td><div class="summary">
            Initializes a new instance of the
            <span class="selflink">TenantPropagationBehavior<span id="LST2BAC7967_10"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_10?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_11"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_11?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></span> class.
            </div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Properties</span></div><div id="ID4RBSection" class="collapsibleSection"><table class="members" id="propertyList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubproperty.gif" alt="Public property" title="Public property" /></td><td><a href="6D4D1986.htm">TenantIdentificationStrategy</a></td><td><div class="summary">
            Gets the strategy used for identifying the current tenant.
            </div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Methods</span></div><div id="ID5RBSection" class="collapsibleSection"><table class="members" id="methodList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="D37CE35C.htm">AddBindingParameters(ServiceEndpoint, BindingParameterCollection)</a></td><td><div class="summary">
            Implement to pass data at runtime to bindings to support custom behavior.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="B1B1F58D.htm">AddBindingParameters(ServiceDescription, ServiceHostBase, Collection<span id="LST2BAC7967_12"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_12?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>ServiceEndpoint<span id="LST2BAC7967_13"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_13?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>, BindingParameterCollection)</a></td><td><div class="summary">
            Provides the ability to pass custom data to binding elements to support the contract implementation.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="1CF8AB9C.htm">ApplyClientBehavior</a></td><td><div class="summary">
            Adds the <a href="17A2BA4D.htm">TenantPropagationMessageInspector<span id="LST2BAC7967_14"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_14?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_15"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_15?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a>
            to the client.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="3EC4C506.htm">ApplyDispatchBehavior(ServiceDescription, ServiceHostBase)</a></td><td><div class="summary">
            Adds the <a href="17A2BA4D.htm">TenantPropagationMessageInspector<span id="LST2BAC7967_16"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_16?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_17"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_17?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a>
            to the service endpoints.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="FAC85DBC.htm">ApplyDispatchBehavior(ServiceEndpoint, EndpointDispatcher)</a></td><td><div class="summary">
            Implements a modification or extension of the service across an endpoint.
            </div></td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/bsc2ak47" target="_blank">Equals</a></td><td><div class="summary">Determines whether the specified object is equal to the current object.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="protected;inherited;notNetfw;"><td><img src="../icons/protmethod.gif" alt="Protected method" title="Protected method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/4k87zsw7" target="_blank">Finalize</a></td><td><div class="summary">Allows an object to try to free resources and perform other cleanup operations before it is reclaimed by garbage collection.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/zdee4b3y" target="_blank">GetHashCode</a></td><td><div class="summary">Serves as the default hash function. </div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/dfwy45w9" target="_blank">GetType</a></td><td><div class="summary">Gets the <a href="http://msdn2.microsoft.com/en-us/library/42892f65" target="_blank">Type</a> of the current instance.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="protected;inherited;notNetfw;"><td><img src="../icons/protmethod.gif" alt="Protected method" title="Protected method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/57ctke0a" target="_blank">MemberwiseClone</a></td><td><div class="summary">Creates a shallow copy of the current <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/7bxwbwt2" target="_blank">ToString</a></td><td><div class="summary">Returns a string that represents the current object.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="97104B6.htm">Validate(ServiceEndpoint)</a></td><td><div class="summary">
            Implement to confirm that the endpoint meets some intended criteria.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="C737190D.htm">Validate(ServiceDescription, ServiceHostBase)</a></td><td><div class="summary">
            Provides the ability to inspect the service host and the service description to confirm that the service can run successfully.
            </div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID6RB')" onkeypress="SectionExpandCollapse_CheckKey('ID6RB', event)" tabindex="0"><img id="ID6RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID6RBSection" class="collapsibleSection"><p>
             This behavior applies the <a href="17A2BA4D.htm">TenantPropagationMessageInspector<span id="LST2BAC7967_18"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_18?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_19"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_19?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a>
             to WCF clients and service hosts to automatically get the tenant ID on
             the WCF client end, add the ID to a header on the outbound message, and
             have the tenant ID read from headers on the service side and added to the
             operation context in an
             <a href="B3AA2FC6.htm">TenantIdentificationContextExtension</a>.
             This allows you, on the service side, to use the
             <a href="C74DD904.htm">OperationContextTenantIdentificationStrategy</a>
             as your registered <a href="F96BD55C.htm">ITenantIdentificationStrategy</a>.
             </p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID7RB')" onkeypress="SectionExpandCollapse_CheckKey('ID7RB', event)" tabindex="0"><img id="ID7RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Examples</span></div><div id="ID7RBSection" class="collapsibleSection"><p>
             In the following examples, the tenant ID is a <a href="http://msdn2.microsoft.com/en-us/library/s1wwdcbf" target="_blank">String</a>,
             so the <span class="typeparameter">TTenantId</span> in the examples corresponds.
             In your application, your tenant ID may be a nullable GUID or some other
             object, so you'd need to update accordingly. That would mean passing
             a different type as <span class="typeparameter">TTenantId</span> and implementing
             a custom <a href="F96BD55C.htm">ITenantIdentificationStrategy</a>
             that parses the appropriate tenant ID from the execution context.
             </p><p>
             The following snippet shows what registration of this behavior
             might look like in an ASP.NET application that consumes WCF services.
             </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EAECBA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAECBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EAECBA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAECBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> <span class="highlight-keyword">class</span> MvcApplication : HttpApplication, IContainerProviderAccessor
{
  <span class="highlight-keyword">private</span> <span class="highlight-keyword">static</span> IContainerProvider _containerProvider;

  <span class="highlight-keyword">public</span> IContainerProvider ContainerProvider
  {
    <span class="highlight-keyword">get</span> { <span class="highlight-keyword">return</span> _containerProvider; }
  }

  <span class="highlight-keyword">public</span> <span class="highlight-keyword">static</span> <span class="highlight-keyword">void</span> RegisterRoutes(RouteCollection routes)
  {
    <span class="highlight-comment">// Register your routes as normal.</span>
  }

  <span class="highlight-keyword">protected</span> <span class="highlight-keyword">void</span> Application_Start()
  {
    <span class="highlight-comment">// Create a tenant ID strategy that will get the tenant from</span>
    <span class="highlight-comment">// your ASP.NET request context.</span>
    <span class="highlight-keyword">var</span> tenantIdStrategy = <span class="highlight-keyword">new</span> RequestParameterTenantIdentificationStrategy(<span class="highlight-literal">"tenant"</span>);

    <span class="highlight-comment">// Register application-level dependencies and controllers.</span>
    <span class="highlight-keyword">var</span> builder = <span class="highlight-keyword">new</span> ContainerBuilder();
    builder.RegisterType&lt;HomeController&gt;();
    <span class="highlight-comment">// ... and so on.</span>

    <span class="highlight-comment">// When you register the WCF service client, add the</span>
    <span class="highlight-comment">// TenantPropagationBehavior to the Opening event:</span>

    builder.Register(
      c =&gt; <span class="highlight-keyword">new</span> ChannelFactory&lt;IMultitenantService&gt;(
        <span class="highlight-keyword">new</span> BasicHttpBinding(),
        <span class="highlight-keyword">new</span> EndpointAddress(<span class="highlight-literal">"http://server/TheService.svc"</span>))).SingleInstance();
    builder.Register(
      c =&gt;
      {
        <span class="highlight-keyword">var</span> factory = c.Resolve&lt;ChannelFactory&lt;IMultitenantService&gt;&gt;();
        factory.Opening +=
          (sender, args) =&gt;
            factory.Endpoint.Behaviors.Add(
            <span class="highlight-keyword">new</span> TenantPropagationBehavior&lt;<span class="highlight-keyword">string</span>&gt;(tenantIdStrategy);
        <span class="highlight-keyword">return</span> factory.CreateChannel()
      }).InstancePerHttpRequest();

    <span class="highlight-comment">// Create the multitenant container.</span>
    <span class="highlight-keyword">var</span> mtc = <span class="highlight-keyword">new</span> MultitenantContainer(tenantIdStrategy, builder.Build());

    <span class="highlight-comment">// Register tenant specific overrides and set up the</span>
    <span class="highlight-comment">// application container provider.</span>
    _containerProvider = <span class="highlight-keyword">new</span> ContainerProvider(mtc);

    <span class="highlight-comment">// Do other MVC setup like route registration, etc.</span>
    ControllerBuilder.Current.SetControllerFactory(<span class="highlight-keyword">new</span> AutofacControllerFactory(<span class="highlight-keyword">this</span>.ContainerProvider));
    AreaRegistration.RegisterAllAreas();
    RegisterRoutes(RouteTable.Routes);
  }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAECBA");</script><p>
             Note that much of the above code is the standard ASP.NET application
             wireup with Autofac. The important part is when you register the service
             client - it needs to have a <span class="selflink">TenantPropagationBehavior<span id="LST2BAC7967_20"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_20?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_21"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_21?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></span>
             attached to it that can get the container provider from the
             current application.
             </p><p>
             The following snippet shows what registration of this behavior
             looks like in a WCF application hosted in IIS:
             </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EABCBA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EABCBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EABCBA');return false;" title="Copy">Copy</a></div></div><div id="ID1EABCBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> <span class="highlight-keyword">class</span> Global : System.Web.HttpApplication
{
  <span class="highlight-keyword">protected</span> <span class="highlight-keyword">void</span> Application_Start(<span class="highlight-keyword">object</span> sender, EventArgs e)
  {
      <span class="highlight-comment">// Create the tenant ID strategy. Required for multitenant integration.</span>
      <span class="highlight-keyword">var</span> tenantIdStrategy = <span class="highlight-keyword">new</span> OperationContextTenantIdentificationStrategy();

      <span class="highlight-comment">// Register application-level dependencies and service implementations.</span>
      <span class="highlight-keyword">var</span> builder = <span class="highlight-keyword">new</span> ContainerBuilder();
      builder.RegisterType&lt;BaseImplementation&gt;().As&lt;IMultitenantService&gt;();
      <span class="highlight-comment">// ... and so on.</span>

      <span class="highlight-comment">// Create the multitenant container.</span>
      <span class="highlight-keyword">var</span> mtc = <span class="highlight-keyword">new</span> MultitenantContainer(tenantIdStrategy, builder.Build());

      <span class="highlight-comment">// Configure tenant-specific overrides and set the WCF host container.</span>
      Autofac.Multitenant.Wcf.AutofacHostFactory.Container = mtc;

      <span class="highlight-comment">// Add a behavior to service hosts that get created so incoming messages</span>
      <span class="highlight-comment">// get inspected and the tenant ID can be parsed from message headers.</span>
      Autofac.Multitenant.Wcf.AutofacHostFactory.HostConfigurationAction =
        host =&gt;
          host.Opening += (s, args) =&gt;
            host.Description.Behaviors.Add(<span class="highlight-keyword">new</span> TenantPropagationBehavior&lt;<span class="highlight-keyword">string</span>&gt;(tenantIdStrategy));
  }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EABCBA");</script><p>
             Note that it is also very similar to standard wireup with Autofac WCF
             integration, just that you use the multitenant WCF host, a multitenant
             container, and a behavior to get the tenant ID from the operation context.
             </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID8RB')" onkeypress="SectionExpandCollapse_CheckKey('ID8RB', event)" tabindex="0"><img id="ID8RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID8RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="141CAB29.htm">Autofac.Multitenant.Wcf Namespace</a></div><div class="seeAlsoStyle"><a href="17A2BA4D.htm">Autofac.Multitenant.Wcf<span id="LST2BAC7967_22"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_22?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>TenantPropagationMessageInspector<span id="LST2BAC7967_23"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_23?cs=&lt;|vb=(Of |cpp=&lt;|nu=(|fs=&lt;'");</script>TTenantId<span id="LST2BAC7967_24"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_24?cs=&gt;|vb=)|cpp=&gt;|nu=)|fs=&gt;");</script></a></div><div class="seeAlsoStyle"><a href="C74DD904.htm">Autofac.Multitenant.Wcf<span id="LST2BAC7967_25"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST2BAC7967_25?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>OperationContextTenantIdentificationStrategy</a></div></div></div></div><div id="pageFooter" class="pageFooter"><p><a href="http://autofac.org" target="_blank">Copyright (c) 2007-2016 Autofac Contributors</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:autofac%40googlegroups.com?Subject=Autofac .NET Inversion of Control Container">autofac@googlegroups.com</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script> </div></body></html>